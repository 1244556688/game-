<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>打磚塊遊戲</title>
<style>
  body { margin:0; background:#222; display:flex; justify-content:center; align-items:center; height:100vh; overflow:hidden; touch-action:none; }
  canvas { background:#111; display:block; }
</style>
</head>
<body>
<canvas id="gameCanvas"></canvas>
<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth * 0.9;
canvas.height = window.innerHeight * 0.7;

const paddle = { width:100, height:20, x:canvas.width/2-50, y:canvas.height-30 };
const ball = { x:canvas.width/2, y:canvas.height-50, radius:10, dx:3, dy:-3 };
const brick = { row:5, col:7, width:60, height:20, padding:10, offsetTop:50, offsetLeft:35 };

let bricks = [];
for(let r=0;r<brick.row;r++){ bricks[r]=[]; for(let c=0;c<brick.col;c++){ bricks[r][c]={x:0,y:0,status:1}; } }

function drawPaddle(){ ctx.fillStyle='#0f0'; ctx.fillRect(paddle.x,paddle.y,paddle.width,paddle.height); }
function drawBall(){ ctx.beginPath(); ctx.arc(ball.x,ball.y,ball.radius,0,Math.PI*2); ctx.fillStyle='#f00'; ctx.fill(); ctx.closePath(); }
function drawBricks(){ for(let r=0;r<brick.row;r++){ for(let c=0;c<brick.col;c++){ if(bricks[r][c].status==1){ let brickX=c*(brick.width+brick.padding)+brick.offsetLeft; let brickY=r*(brick.height+brick.padding)+brick.offsetTop; bricks[r][c].x=brickX; bricks[r][c].y=brickY; ctx.fillStyle='#00f'; ctx.fillRect(brickX,brickY,brick.width,brick.height); } } } }

function movePaddle(){ if(paddle.x<0)paddle.x=0; if(paddle.x+paddle.width>canvas.width)paddle.x=canvas.width-paddle.width; }
function moveBall(){
  ball.x+=ball.dx; ball.y+=ball.dy;
  if(ball.x+ball.radius>canvas.width||ball.x-ball.radius<0) ball.dx*=-1;
  if(ball.y-ball.radius<0) ball.dy*=-1;
  if(ball.y+ball.radius>canvas.height){ alert('遊戲結束!'); document.location.reload(); }
  if(ball.x>paddle.x&&ball.x<paddle.x+paddle.width&&ball.y+ball.radius>paddle.y){ ball.dy*=-1; let collidePoint=ball.x-(paddle.x+paddle.width/2); ball.dx=collidePoint*0.2; }
  for(let r=0;r<brick.row;r++){ for(let c=0;c<brick.col;c++){ let b=bricks[r][c]; if(b.status==1 && ball.x>b.x && ball.x<b.x+brick.width && ball.y-ball.radius<b.y+brick.height && ball.y+ball.radius>b.y){ ball.dy*=-1; b.status=0; } } }
}

function draw(){ ctx.clearRect(0,0,canvas.width,canvas.height); drawPaddle(); drawBall(); drawBricks(); movePaddle(); moveBall(); requestAnimationFrame(draw); }

canvas.addEventListener('touchmove',function(e){ let touchX=e.touches[0].clientX-canvas.getBoundingClientRect().left; paddle.x=touchX-paddle.width/2; });

draw();
</script>
</body>
</html>
